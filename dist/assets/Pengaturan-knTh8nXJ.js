import{c as i,u as S,r,o as E,j as e,q as j,e as M,t as D}from"./index-BWiC8cDx.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=i("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=i("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=i("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function q(){const{user:n,updatePassword:N}=S(),[d,c]=r.useState([]),[a,l]=r.useState({username:"",password:"",name:"",role:"karyawan"}),[x,m]=r.useState(""),[o,h]=r.useState(""),[p,u]=r.useState(""),[g,t]=r.useState(""),[b,v]=r.useState(new Date().toISOString().slice(0,7));r.useEffect(()=>{n.role==="manager"&&c(E())},[n.role]);const f=()=>{if(a.username&&a.password&&a.name){const s=[...d,{id:crypto.randomUUID(),...a}];j(s),c(s),l({username:"",password:"",name:"",role:"karyawan"}),t("Pengguna berhasil ditambahkan"),setTimeout(()=>t(""),3e3)}},k=s=>{const w=d.filter(C=>C.id!==s);j(w),c(w),t("Pengguna berhasil dihapus"),setTimeout(()=>t(""),3e3)},P=()=>{if(o!==p){t("Password baru tidak cocok");return}N(x,o)?(t("Password berhasil diubah"),m(""),h(""),u("")):t("Password saat ini salah"),setTimeout(()=>t(""),3e3)},U=()=>{const s=M();D(s,b)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pengaturan"}),g&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-600 px-4 py-3 rounded-lg",children:g}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Ubah Password"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Saat Ini"}),e.jsx("input",{type:"password",value:x,onChange:s=>m(s.target.value),className:"w-full p-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Baru"}),e.jsx("input",{type:"password",value:o,onChange:s=>h(s.target.value),className:"w-full p-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi Password Baru"}),e.jsx("input",{type:"password",value:p,onChange:s=>u(s.target.value),className:"w-full p-2 border rounded-lg"})]}),e.jsx("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Ubah Password"})]})]}),n.role==="manager"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(K,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Kelola Pengguna"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("input",{placeholder:"Username",value:a.username,onChange:s=>l({...a,username:s.target.value}),className:"p-2 border rounded-lg"}),e.jsx("input",{placeholder:"Password",type:"password",value:a.password,onChange:s=>l({...a,password:s.target.value}),className:"p-2 border rounded-lg"}),e.jsx("input",{placeholder:"Nama Lengkap",value:a.name,onChange:s=>l({...a,name:s.target.value}),className:"p-2 border rounded-lg"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Tambah Pengguna"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Daftar Pengguna"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Username"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.role==="manager"?"Manager":"Karyawan"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.role!=="manager"&&e.jsx("button",{onClick:()=>k(s.id),className:"text-red-600 hover:text-red-800",children:"Hapus"})})]},s.id))})]})})]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(y,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Export Data"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"month",value:b,onChange:s=>v(s.target.value),className:"p-2 border rounded-lg"}),e.jsxs("button",{onClick:U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Absensi"})]})]})]})]})]})}export{q as default};
